{% extends "account/base.html" %}

{% block head_title %}Смена пароля{% endblock %}

{% load user_filters %}


{% block content %}

  <div class="row justify-content-center">
    <div class="col-md-8 p-5">
      <div class="card">
        <div class="card-header">{% if token_fail %}Устаревшая ссылка{% else %}Смена пароля{% endif %}</div>
        <div class="card-body">

          {% if token_fail %}
            <p class="text-center">
              Ссылка для сброса пароля недействительна, возможно, потому, что она уже использовалась. 
              Для дальшнейших дейсвий перейлите по
              <a href="{% url 'account_reset_password' %}">ссылке</a>.
            </p>
          {% else %}
            {% if form %}
            <form method="post" action="{{ action_url }}">
              {% csrf_token %}

              <div class="form-group row">
                <label for="{{ form.password1.id_for_label }}" class="col-md-4 col-form-label text-md-right">
                  Новый пароль
                </label>
                <div class="col-md-6">
                  {{ form.password1|addclass:"form-control" }}
                </div>
              </div>

              <div class="form-group row">
                <label for="{{ form.password2.id_for_label }}" class="col-md-4 col-form-label text-md-right">
                  Новый пароль (еще раз)
                </label>
                <div class="col-md-6">
                  {{ form.password2|addclass:"form-control" }}
                </div>
              </div>

              <div class="col-md-6 offset-md-4">
                <button type="submit" name="action" class="btn btn-primary">
                  Изменить пароль
                </button>
              </div>

            </form>

            {% else %}
              <p class="text-center">Ваш пароль изменен.</p>
            {% endif %}

          {% endif %}

        </div>
      </div>
    </div>
  </div>

{% endblock %}
